#
#Εργαστηρίο ΛΣ 1/Ασκήση 1/2022-23
#Ονοματεπώνυμο:Φίλιππος Πααπαγεωργίου
#ΑΜ:21390174
#
#Ερώτηση 1.    
#Δημιουργήστε στον τρέχοντα κατάλογο το αρχείο 'ask1.txt' με τα ακόλουθα περιεχόμενα (όνομα, επώνυμο,
#username, ΤΚ, περιοχή, τηλ.), και εμφανίστε το στη συνέχεια στην οθόνη, με αριθμημένες τις γραμμές του.
#George Pappas george2 12136 Peristeri -------
#Nick Nikolaoy nick23 12232 Aigaleo 5314555
#George Georgioy george583 11132 Athens -------
#Helen Georgioy helen3 12136 Peristeri 5748456
#Nick Pappas nick4 11223 Aigaleo 5324123
#Helen Ioannoy helen367 13222 Athens -------
#Helen Thanoy helen36 11132 Peristeri 9718345
#Vasilis Mamalis vas32 12345 Dafni 9738383
#
#Απάντηση:Φτιάξαμε το άρχειο με την εντολή nano ask1.txt αντιγράψαμε 
#τα δεδομένα στο άρχειο,σώζουμε το αρχείο και χρησιμοποιούμε την εντόλη
#cat -n filename που μας τα εμφανίζει αριθμημένα.
#
nano ask1.txt
cat -n ask1.txt   
#1	George Pappas george2 12136 Peristeri -------
#     2	Nick Nikolaoy nick23 12232 Aigaleo 5314555
#     3	George Georgioy george583 11132 Athens -------
#     4	Helen Georgioy helen3 12136 Peristeri 5748456
#     5	Nick Pappas nick4 11223 Aigaleo 5324123
#     6	Helen Ioannoy helen367 13222 Athens -------
#     7	Helen Thanoy helen36 11132 Peristeri 9718345
#     8	Vasilis Mamalis vas32 12345 Dafni 9738383
#
#Έρωτηση 2.
#Τρεξτέ την εντολή cal -3>calfile.txt και εξηγειστέ ακριβως τι κάνει
#η εντολή cal  είναι το ημερολογίο και με το -3 εμφάνιζει τους 3 τελευταιούς μήνες
#και μαζί το '>' επαναπροσδιορισμό εξόδου τα βάζει μέσα στο άρχειο.
#
cal -3>calfile.txt
#
#Ερώτηση 3.
#Συνενώστε τα αρχεία calfile.txt και ask1.txt σε ένα αρχείο με όνομα full.txt
#
cat calfile.txt ask1.txt>full.txt
#
#Ερώτηση 4
#Εμφανίστε στην οθόνη τα πέντε πιο πρόσφατα τροποποιημένα αρχεία του καταλόγου #σας. 
#με την εντολη ls -t1| head 5 θα δούμε τα τελευταία 5 αρχεία. το t κάνει sort #βάσει την ημερομηνία 
#τροποποίησης και με τον σωλήνα ο οποίος ενώνει 2 εντολές το head 5  εμφανίζει #συκγεκριμένα 5 αρχεία.
#
ls -t1 | head 5
#
#Ερώτηση 5.
#Δημιουργήστε έναν κατάλογο με όνομα 'mydir1'. Μεταβείτε σε αυτόν και στη #συνέχεια αντιγράψτε εκεί (χωρίς
#να αλλάξετε κατάλογο) το αρχείο 'full.txt' (από το γονικό κατάλογο). Μετονομάστε #το εν συνεχεία σε #'new.txt'.Επιστρέψτε στο γονικό κατάλογο. Διαγράψτε τον #κατάλογο 'mydir1' και τα περιεχόμενά του.
#
mkdir mkdir1
cp /home/filipposp/Desktop/full.txt /home/filipposp/Desktop/mydir1
rm -r mydir1
#
#Έρωτηση 6.
#Δώστε τις εντολές που θα εμφανίσουν: (α) όλα τα αρχεία του καταλόγου /usr με #πληροφορίες για το inode
#τους και το μέγεθος τους σε blocks. (β) όλα τα περιεχόμενα του δέντρου καταλόγων #και υποκαταλόγων
#(αναδρομικά) που βρίσκονται κάτω από τον κατάλογο /usr, με πλήρεις πληροφορίες #για κάθε ένα από αυτά και εμφανιζόμενα σταδιακά, σελίδα προς σελίδα
#(a:
ls -li /usr
#b)
ls -lR /usr
#
#
#Ερώτηση 7.
#Δημιουργήστε έναν κατάλογο με όνομα 'testdir1'. Μεταβείτε σε αυτόν και φτιάξτε #εκεί ένα hard link (με το
#όνομα 'ask1link') προς το αρχείο 'ask1.txt' του γονικού καταλόγου. Βεβαιωθείτε #(δίνοντας την κατάλληλη
#εντολή και εξηγώντας τι βλέπετε) ότι έχει δημιουργηθεί και ότι δεν είναι #symbolic (soft) link.
#
mkdir testdir1
ln /home/filipposp/Desktop/ask1.txt /home/filipposp/Desktop/testdir1/ask1link
#
#Με την εντολή ln  δημιουργουμε ένα hardlink ως προς ένα αρχείο
#με την εντολή ll -i  θα δούμε μέσα στο αρχείο τα ids  των αρχείων και θα δούμε 
#15480856 -rw-r--r-- 2 filipposp filipposp 353 Νοε  14 12:11 ask1link
#
#Έρωτηση8.
#Μπείτε στο αρχείο 'ask1link' και διαγράψτε την τελευταία του γραμμή. Βεβαιωθείτε #στη συνέχεια ότι η αλλαγή αυτή έχει γίνει και στο αρχείο 'ask1.txt'.
#
nano ask1link
#διάγραφω τελευταία γραμμή 
cd ../
nano ask1.txt
#και βλέπω ότι έχει διαγραφθεί και στο ask1.txt άρχειο
#
#Ερώτηση 9.
#Δημιουργήστε ένα κατάλογο kat1 και μέσα σε αυτόν δύο αρχεία, file1 και file2, με #περιεχόμενο τη λέξη 'one' το
#ένα και τη λέξη 'two' το άλλο. Τρέξτε (μέσα στον κατάλογο kat1) την εντολή 'cp' #και εξηγήστε το αποτέλεσμα.
#Στη συνέχεια τρέξτε την εντολή 'mv *' και εξηγήστε το αποτέλεσμα.
#
mkdir kat1
touch file1 file2
nano file1
nano file2
#
#
#Έρωτηση 10.
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες τελειώνουν με ένα ή #περισσότερα συνεχόμενα ψηφία.
#
grep -h '[0-9]$' ask1.txt
#
#Nick Nikolaoy nick23 12232 Aigaleo 5314555
#Helen Georgioy helen3 12136 Peristeri 5748456
#Nick Pappas nick4 11223 Aigaleo 5324123
#Helen Thanoy helen36 11132 Peristeri 9718345
#
#Ερώτηση 11.
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες περιέχουν μεν το πρότυπο #'Pap' αλλά δεν περιέχουν το πρότυπο 'Aig'.
#
grep -P 'Pap(?!.*Aig)' ask1.txt 
George Pappas george2 12136 Peristeri -------
#
#Ερώτηση 12
#Εμφανίστε τις γραμμές του αρχείου 'ask1.txt' οι οποίες δεν αρχίζουν με 'G' ή 'N' #και περιέχουν εν συνεχεία
#(κάπου στα περιεχόμενά τους) τα πρότυπα 'Geo' και 'Per' με αυτή τη σειρά.' 
#
grep "Geo\|Per" ask1.txt | grep -v "^G\|^N"   
Helen Georgioy helen3 12136 Peristeri 5748456
Helen Thanoy helen36 11132 Peristeri 9718345
#
#Ερώτηση 13.
#Πόσοι χρήστες που το username τους δεν αρχίζει από 'ls1' είναι συνδεδεμένοι στο #σύστημα ? 
#
w | grep -v '^ls1'  
#
#Ερωτήση 14
#Εμφανίστε όλες τις διεργασίες χρηστών (αλλ/σης) που τρέχουν αυτή τη στιγμή στο #σύστημα.
#
ps -eaf
#
#Ερώτηση 15.
#Πόσες διεργασίες χρηστών (αλλ/σης) τρέχουν στο σύστημα και τελειώνει το όνομά #τους με 'sh' ?
#
ps -eaf |grep -v "*sh" 
#
#Έρωτηση 16.
# Ποιες διεργασίες (πάσης μορφής) τρέχουν αυτή τη στιγμή από το λογαριασμό του #διαχειριστή ?
#
ps-eaf | grep ^root
#
#Ερώτηση 17.
#Πόσα αρχεία του τρέχοντος καταλόγου σας (μόνο του τρέχοντος - όχι και των #υποκαταλόγων του) έχουν
#permissions 'r' από τους πάντες, ‘w’ μόνο από τον ιδιοκτήτη, και 'x' από #κανέναν ?
#κάνω την εντολή ls -ll για να δω τα αρχεία και τις ιδιοτήτες τους
#
find -perm 644
#
#Ερώτηση 18.
#Βρείτε τους καταλόγους του συστήματος που το όνομά τους αρχίζει από 't
#
ls -all | ls -d t*  
#
#Ερώτηση 19.
#Να βρείτε και να παρουσιάσετε στην οθόνη με πλήρεις πληροφορίες όλα τα αρχεία με #όνομα που αρχίζει από tty και βρίσκονται στον κατάλογο /dev
#
find /dev -name "tty*"
#
#Ερώτηση 20.
#Ταξινομήστε τα περιεχόμενα του αρχείου 'ask1.txt' ως προς το username σε #φθίνουσα σειρά.
#
sort -r -k 1 ask1.txt  
#
#Ερώτηση 21
#Ταξινομήστε τα '.c' αρχεία του καταλόγου στον οποίον δουλεύετε ως προς το #μέγεθός τους.
#
ls -S -l *.c   
#
#Το -S είναι sort==size μαζί με το -l  και *.c μας εμφανίζει το επιθύμιτο αποτέλεσμα
#
#Ερώτηση 22.
#Ταξινομήστε τα αρχεία του λογαριασμού σας με permissions 755 ως προς το μέγεθός #τους
#
#Μπορούμε να εμφανίσουμε ολα τα αρχεία με συκγεκριμένο permision με την εντολή #find και την παράμετρο -perm και μαζί με την εντολή 'ls -S' ταξινόμει με το #μεγεθό τους
#
find /home/filipposp -perm 755 -exec ls -S {} \;
#
#Ερώτηση 23.
#Ταξινομήστε όλα τα περιεχόμενα του καταλόγου /dev κατά πρώτον ως προς τον owner #και κατά δεύτερον ως προς το group και αποθηκεύστε το output στο αρχείο #'binfiles.txt'.
#
#Άπαντηση:
#Εμφανίζω τις πληροφορίες που θελώ με 'ls -l /dev' και στην συνεχεία ταξινόμω με #pipe και την sort και χρησιμοποιω το > για να βάλω το αποτέλεσμα στο αρχείο που #θέλω
ls -l /dev | sort -k 3,4 > binfile.txt  
#
#Ερώτηση 24
#Φτιάξτε ένα αρχείο που θα περιέχει πληροφορίες μόνο για τους συνδεδεμένους #χρήστες που το username τους αρχίζει από 'ls1', ταξινομημένο ως προς την #ημερομηνία και ώρα σύνδεσή τους.
#
#Απαντησή:
#Αφού παρούμε όλους του χρηστές από την who με το grep 'ls1' ταξινομούμε με την #sort κάτα την 3,4 στήλη που δείχνουν ημερομηνία και ώρα σύνδεσης
#
who | grep 'ls1' | sort -k 3,4
#
#Ερώτηση 25.
#Αλλάξτε στο αρχείο 'ask1.txt' το όνομα 'Nick' (όπου συναντάται) σε 'Nickolaos'. 
#
#Άπαντηση:Για να το κάνουμε αύτο θα χρησιμόποιησουμε την εντολή sed αλλάζει ένα 
#pattern κάθε φόρα ποθ συναντάται και χρησιμόποιω το -i για να απόθυκευσω τις #άλλαγες.
#
sed -i "s/Nick/Nickolaos/g" ask1.txt
#
#
#Έρωτηση 26.
#Έστω τα ακόλουθα items του file system με protection strings: (α) '-rwxr-x--x', #(β) 'drwxr-xr-- ' και (γ) 'drwx--x--x.
#Εξηγείστε τι είδους items είναι και ποια τα δικαιώματα πρόσβασης user, group και #others σε αυτά.
#
#Άπαντηση:
#(α)Το είδος item είναι αρχείο κείμενου εφόσον το πρώτο πεδίο είναι '-' κένο.Όσο #αφόρα τα δικαιώματα,το δικαιώμα για γράψιμο το έχει μόνο ο ιδίοκτητης του #αρχείου,διάβασματος ο ιδιοκτήτης του αρχείου και όσοι είναι στο ίδιο group με #αύτον και όλοι οι χρήστες μπόρουν να το εκτελέσουν.
#(β)Tο είδος είναι directory δίοτι το πρώτο γράμμα είνια το 'd'.Δικαιώμα εγγραφής 
#έχει μόνο ο ιδιοκτήτης,διαβασματός και εκτέλεσης ο ιδίοκτητης και τα μέλη group
#οι θπολοίπη χρήστες δεν έχουν δικαίωματα.
#(γ)Το είδος είναι επίσης directory.Δικαιώματα εγγραφής και διαβάσματος μόνο ο #ίδιοκτητης και εκτέλεση όλοι οι χρήστες.
#
#Ερώτηση 27.
#Αλλάξτε τα permissions όλων των αρχείων του καταλόγου 'testdir1' έτσι ώστε να #έχουν δικαίωμα εκτέλεσης και εγγραφής μόνο ο ιδιοκτήτης, ενώ δικαίωμα ανάγνωσης #να έχουν όλοι
#
#Άπαντηση:
#Η εντόλη chmod αλλάζει τα permisions.Με την επίλογη 'R' δηλώνουμε ότι θα γίνει #αναδρομίκα άφου θέλουμε σε όλο τον φάκελο
#
chmod -R a=r,u+wx testdir1                                        
#
#Ερώτηση 28.
#Αλλάξτε τα permissions του καταλόγου 'testdir1' έτσι ώστε να έχουν δικαίωμα #πρόσβασης (enter/run) όλοι οι χρήστες, δικαίωμα δημιουργίας και διαγραφής #αρχείων μόνο ο ιδιοκτήτης, ενώ δικαίωμα ανάγνωσης να έχουν τόσο ο ιδιοκτήτης όσο #και οι χρήστες του group του αρχείου.
#
#Άπαντηση:
chmod ugr,o-r testdir1
#Ερώτηση 29.
#Δημιουργήστε έναν νέο χρήστη στο σύστημά σας με username 'myfriend'. Αλλάξτε στη #συνέχεια τον ιδιοκτήτη
#του αρχείου 'ask1.txt' σε 'myfriend' και μετακινήστε το στο working directory #του. Περιορίστε τέλος το
#διαθέσιμο χώρο αποθήκευσης στο δίσκο για το συγκεκριμένο χρήστη στα 10MB.
#
#Άπαντηση:
#Για να φτίαξουμε έναν νέο user  χρησιμόποιουμε την εντολή 'useradd', για να #αλλάξουμε τον ιδιοκτητή αρχείου χρησιμοποιούμε την εντολή 'chown'.Τέλος για να #περιορίσουμε τον χώρο αποθυκευσής στον δισκό χρησιμοποιούμε την εντολή #'edquota' 
#
useradd -m -d /home/myfriend myfriend
chown myfriend ask1.txt
mv ask1.txt /home/myfriend
edquota myfriend 
#
#Η εντολή edquota θα μας ανοιξεί στον default editor ένα αρχείο στο οποίο #μπορούμε να τροποιήσουμε τον αποθυκεύτικο χώρο για τον χρήστη myfriend
#
#Ερώτηση 30.
#Δημιουργείστε τα αρχεία f1, f2, f3, f4, f5, f6 ,f7 με τα εξής δικαιώματα:
# f1, 757
# f2, 313
# f3, 010
# f4, 642
# f5, 551
# f6, 133
# f7, 111
#Με χρήση της εντολής ls –l και διοχετεύοντας τα αποτελέσματά της στην
#εντολή egrep να βρείτε τα αρχεία όπου:
#a. To group έχει δικαιώματα r-x.
#b. Ο user και οι others έχουν ακριβώς τα ίδια δικαιώματα
#c. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write
#d. Ο user, το group και οι others έχουν τα ίδια δικαιώματα για write και execute
#e. To group και οι others έχουν τα ίδια δικαιώματα για read και execute
#
#Απάντηση:
#Άρχικα θα φτίαξουμε τα αρχεία με τα δικαιώματα που μας ζητούνται.
#
touch f1 && chmod 757 f1
touch f2 && chmod 313 f2
touch f3 && chmod 010 f3
touch f4 && chmod 642 f4
touch f5 && chmod 551 f5
touch f6 && chmod 133 f6
touch f7 && chmod 111 f7
#
#α) το pattern που θα αναζήτησουμε είναι στο permision string του group θα πρέπει #να υπάρχει το r-x
#
ls -l | egrep "^-...r-x..."
#
#Απότελσμα εντολής
#-rwxr-xrwx  1 filipposp filipposp     0 Δεκ   6 21:09 f1
#-r-xr-x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f5
#
#b)Θα φτίαξουμε ένα caption group  για το permision του user  και θα το #αποθυκεύσουμε στην μεταβλήτη 1 και μέτα θα το σύκγρινουμε με τα permission του 
#other.Caption group φτίαχνουμε βάζοντας () και το pattern μέσα.
#
ls -l |egrep "^(...)...\1"
#δήλαδη ξεκινάμε ψάχνωτνας με - για να είναι άρχειο,άποθυκευούμε τους επόμενους 3
#χαράκτηρες στην μέταβλητη 1 μέτα δεν μας πείραζει πιο pattern βρίσκει τέλος στο 
#πεδίο others εμφανίζει την μεταβλήτη 1 που έχει κρατήσει το permission  του user
#
#c)Με παρόμοια λογική κάνουμε και αυτό το ερώτημα άλλα μόνο για το permission #write
#
ls -l |egrep "^.(.)..\1..\1."
#
#Απότελεσμα εντολής:
#------x---  1 filipposp filipposp     0 Δεκ   6 21:09 f3
#-r-xr-x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f5
#---x--x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f7
#
#d)Ξάνα με την ίδια λογική,άλλα κρατάμε για τα πεδία write και excute.
#
ls -l |egrep "^-.(..).\1.\1"
#
#Άποτελεσμα έντολης:
#-r-xr-x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f5
#---x--x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f7
#
#e) Αυτή τη φορά θα κρατήσουμε στις μεταβλητές τα permissions από το group, και #όχι από τον user.
ls -l | egrep "^-...(.).(.)\1.\2"
#   
#Αποτέλεσμα εκτέλεσης της εντολής:
#-rwxr-xrwx  1 filipposp filipposp     0 Δεκ   6 21:09 f1
#--wx--x-wx  1 filipposp filipposp     0 Δεκ   6 21:09 f2
#---x-wx-wx  1 filipposp filipposp     0 Δεκ   6 21:09 f6
#---x--x--x  1 filipposp filipposp     0 Δεκ   6 21:09 f7
#





















































































  














































































#
